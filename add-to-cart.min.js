// 20200611 START 박지영 - addToCart 를 전역변수로 변경
var OBS,addToCart,ga360Init,_salesModelCode,_modelCode,ga360CompareInit,ga360SearchInit,ga360plpInit,reStockAlert;$(document).ready(function(){console.log("add-to-cart.js","OBS_LOGIN_FLAG : ",OBS_LOGIN_FLAG),_salesModelCode=void 0===_dl.products||void 0===_dl.products[0]?"":_dl.products[0].sales_model_code,_modelCode=void 0===_dl.products||void 0===_dl.products[0]?"":_dl.products[0].model_code;var d,y=$(".GPC0009"),e=new URL(window.location.href).searchParams,a=getCookie("shopback_utm_source"),t=getCookie("shopback_sbid"),k=("tw"==COUNTRY_CODE.toLowerCase()&&e.has("utm_source")&&e.has("sbid")?(removeCookie("shopback_utm_source",!0),removeCookie("shopback_sbid",!0),""!=e.get("utm_source")&&""!=e.get("sbid")&&(setCookie("shopback_utm_source",e.get("utm_source"),!0),setCookie("shopback_sbid",e.get("sbid"),!0))):""!=a&&""!=t||(removeCookie("shopback_utm_source",!0),removeCookie("shopback_sbid",!0)),{changeCartUrl:function(e){var a;e&&(a=addToCart.$nav.find(".for-desktop .right-btm .icons .cart a").attr("href"))&&(a=-1!=a.indexOf("?")?a.split("?")[0]+"?cartId="+e:a+"?cartId="+e,addToCart.$nav.find(".for-mobile .right .cart a, .for-desktop .right-btm .icons .cart a").attr("href",a))},checkLogin:function(){var e=!1;return e=0<addToCart.$nav.find(".logged .after-login").length?!0:e},getToken:function(){return sessionStorage.getItem("ACCESS_TOKEN")},createEmptyCart:function(a){var e=k.getToken(),t=addToCart.url,o={},d=(""!=e&&(o.Authorization="Bearer "+e),o.Store=addToCart.store,o["Content-type"]="application/json",y.find("#pin-modelId").val()),r="";0<$(".add-to-cart").length&&(r=$(".add-to-cart:eq(0)")),$.ajax({url:t,headers:o,type:"post",data:JSON.stringify({query:"mutation {createEmptyCart}",variables:null,operationName:null}),dataType:"json",success:function(e){addToCart.cartID=e.data.createEmptyCart,setCookie(addToCart.cookieName,addToCart.cartID,!0),d?0<y.find(".check-good").length?k.addProductToCart(a,1,addToCart.cartID,!0,r):(0<y.find(".checkAvailable").length?($("#comunaRegionId").trigger("chosen:activate"),y.find(".check-region").focus()):$(".GPC0009").hasClass("before")?(0<y.find(".delivery-list .option-list").length&&$("#pinCodeList").trigger("chosen:activate"),y.find(".check-pincode").focus()):$(".GPC0009").hasClass("improve")&&(0<y.find(".checkStock-list .option-list").length&&$("#pinCodeList").trigger("chosen:activate"),y.find(".check-pincode").focus()),$("body").trigger("ajaxLoadEnd")):"Y"==$(".addtocart-datelayer-use-flag").val()?k.addProductToCart(a,1,addToCart.cartID,!0,r):a&&k.addProductToCart(a,1,addToCart.cartID)},error:function(e,a,t){}})},addProductToCart:function(e,a,v,b,_,t){if(console.log("addProductToCart start"),console.log("model"),console.log(e),console.log("qty"),console.log(a),console.log("cartid"),console.log(v),console.log("ga360"),console.log(b),console.log("_obj"),console.log(_),!e)return!1;for(var r=e.split(","),o=[],d=1;d<r.length;d++)o[d-1]=r[d].trim();var e=k.getToken(),i=addToCart.url,s={},e=(""!=e&&(s.Authorization="Bearer "+e),$(".navigation").data("obs-referrer-flag"));let n="";"Y"==e&&(n=sessionStorage.getItem("referrerDomain"));var c,l,m,u="",p=(""!=document.referrer&&(u=getMktDomainUrl(document.referrer)),"undefined"==typeof standardData?"":standardData.pageType),g=getCookie("shopback_utm_source"),h=getCookie("shopback_sbid"),e="Y"==e?JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'" } ],referrerDomain: "'+n+'" }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"sa"==addToCart.store||"sa_en"==addToCart.store?JSON.stringify({query:'mutation { addModelToCart(input: { cart_id: "'+v+'", cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'" } ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"au"==addToCart.store?JSON.stringify({query:'mutation { addModelToCart(input: { cart_id: "'+v+'", cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'", zipcode: "'+t+'" } ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"br"==addToCart.store?JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, zipcode: "'+t+'" } ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"cz"==addToCart.store&&"PRODUCT"==p?JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'", marketplaceName: "'+u+'"} ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"tw"==addToCart.store&&""!=g&&""!=h?JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'" } ], utm_source:"'+g+'" , sbid:"'+h+'"}) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"mx"==addToCart.store?JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'", zipcode: "'+t+'" } ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}):"in"==addToCart.store?JSON.stringify({query:'mutation { addModelToCart(input: { cart_id: "'+v+'", cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'", zipcode: "'+t+'" } ] }) {redirectUrl cart { quote {quote_id} items { product { sku } qty}}}}',variables:null,operationName:null}):JSON.stringify({query:'mutation { addModelToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+'}, package_item_id: "'+o+'" } ] }) {redirectUrl cart { items { product { sku } qty}}}}',variables:null,operationName:null}),p=(s.Store=addToCart.store,s["Content-type"]="application/json",{});if("Y"==(p=void 0!==$("[data-ew-save-data]").data()?$("[data-ew-save-data]").data():p).isEwProduct&&((u={}).sales_model_name=p.sales_model_name,u.serial_no=p.serial_no,u.company_code=p.company_code,u.company_name=p.company_name,(g=$(".extended-warranty .option-form").find('input[name="purchasedDate"]').data("date-format"))&&(u.purchase_date=function(e,a,t){if("object"==typeof e||void 0===e||"null"==e||""==e)return"-";var o="",d="",r="";switch(a){case"dd/mm/yy":case"dd-mm-yy":o=e.substring(6,10),d=e.substring(3,5),r=e.substring(0,2);break;case"mm/dd/yy":case"mm-dd-yy":o=e.substring(6,10),d=e.substring(0,2),r=e.substring(3,5);break;case"yy/mm/dd":case"yy-mm-dd":o=e.substring(0,4),d=e.substring(5,7),r=e.substring(8,10);break;default:return console.log("data Format Error"),!1}switch(t){case"YYYY-MM-DD":return o+"-"+d+"-"+r;case"YYYY/DD/MM":return o+"/"+r+"/"+d;case"DD/MM/YYYY":return r+"/"+d+"/"+o;case"MM/DD/YYYY":return d+"/"+r+"/"+o;default:return r+"/"+d+"/"+o}return!1}(p.purchase_date,g,"YYYY-MM-DD")),u.purchase_price=p.purchase_price,JSON.stringify(u),(h=[]).push("{"),h.push("sales_model_name :"),h.push('"'),h.push(u.sales_model_name),h.push('"'),h.push(",serial_no :"),h.push('"'),h.push(u.serial_no),h.push('"'),h.push(",company_code :"),h.push('"'),h.push(u.company_code),h.push('"'),h.push(",company_name :"),h.push('"'),h.push(u.company_name),h.push('"'),h.push(",purchase_date :"),h.push('"'),h.push(u.purchase_date),h.push('"'),h.push(",purchase_price :"),h.push('"'),h.push(u.purchase_price),h.push('"'),h.push("}"),e=null!=p.pin_code&&""!=p.pin_code?JSON.stringify({query:'mutation { addExtendedWarrantyToCart(input: { cart_id: "'+v+'", cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+', pincode: "'+p.pin_code+'"} } ],productinfo:'+h.join("")+" }) { cart { items { product { sku } qty}}}}",variables:null,operationName:null}):JSON.stringify({query:'mutation { addExtendedWarrantyToCart(input: { cart_id: "'+v+'", cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+"} } ],productinfo:"+h.join("")+" }) { cart { items { product { sku } qty}}}}",variables:null,operationName:null})),0<y.find(".care-select").find("a.act").length&&(g=y.find(".care-select").find("a.act").data("extended-wty-code"),console.log("extendedWtyCode:"+g),e="in"==addToCart.store||"au"==addToCart.store||"mx"==addToCart.store?JSON.stringify({query:'mutation { addExtendedWarrantyToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+',package_item_id:"'+g+'", pincode: "'+t+'"} } ], }) { cart { items { product { sku } qty}}}}',variables:null,operationName:null}):JSON.stringify({query:'mutation { addExtendedWarrantyToCart(input: { cartItems: [ { data: { sku: "'+r[0]+'", qty: '+a+',package_item_id:"'+g+'"} } ], }) { cart { items { product { sku } qty}}}}',variables:null,operationName:null})),0<$(".GPC0009 .objet-selectPart-list li:visible").length&&(c=$(".pdp-parts-choice").hasClass("product"),l="",c&&(l='{ data: { sku: "'+r[0]+'", qty: '+a+"}}"),m=$(".mobile-bottom-info").is(":visible")?".mobile-bottom-info":".desktop-info",$(m+" .objet-selectPart-list li:visible").each(function(e,a){var t=$(m+" .objet-selectPart-list li:visible").length,a=$(a).find(".part-info"),o=a.attr("data-part"),d=a.attr("data-panel-model-id"),a=a.attr("data-sales-model-code");c?l=l+',{data: { sku: "'+d+'", qty: 1 } lg_custom_options: { objet_sales_options: "'+a+","+o+'" parent_sku: "'+r[0]+'" }}':(l=l+'{data: { sku: "'+d+'", qty: 1 } lg_custom_options: { objet_sales_options: "'+a+","+o+'"}}',e<t-1&&(l+=","))}),e=JSON.stringify({query:"mutation { addObjetSalesToCart(input: { cartItems: [ "+l+" ] }) {redirectUrl cart { items { product { sku } qty}}}}",variables:null,operationName:null}),console.log("Objet-Cart Data:"+e)),$(".GPC0162 .btn-add-basket").hasClass("package-deal")){for(var f="",d=0;d<r.length;d++)f+=' { data : { sku: "'+r[d]+'", qty: '+a+' }, package_item_id: "" },';f=f.substring(0,f.length-1),e=JSON.stringify({query:"mutation { addModelToCart(input: { cartItems: ["+f+" ] }) { redirectUrl cart { items { product { sku } qty } } } }",variables:null,operationName:null})}if(0<$(".GPC0009 .add-bundle-area .bundle-list li .act").length){for(var C="",d=1;d<r.length;d++)C+='{ sku: "'+r[d]+'" },';C=C.substring(0,C.length-1),addOnBundleModel=r[0],e=JSON.stringify({query:'mutation { addAddonBundlePackageToCart(input: { cart_id: "", cartItems:{data:{sku:"'+addOnBundleModel+'",package_item:['+C+" ]}}}){cart{items{product{sku}qty}}}}"})}$.ajax({url:i,headers:s,type:"post",data:e,dataType:"json",success:function(e){if(e.errors){for(var a="",t=0;t<e.errors.length;t++)a+=e.errors[t].message;0<$("#addToCartError").length&&$("#addToCartError").remove();var o='<div class="modal modal-simple fade" id="addToCartError" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Fail to add Cart" aria-describedby="addToCartFailDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartFailDialog">'+a+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+addToCart.successBtnClose+"</button></div></div></div></div>";$("body").append(o),$("#addToCartError").modal(),$("#addToCartError").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus()})}else{var d,r,n,i,s,c,l=null,m=0;if(e.data.addModelToCart&&e.data.addModelToCart.cart&&e.data.addModelToCart.cart.items&&0<(m=(l=e.data.addModelToCart.cart.items).length)&&(p=e.data.addModelToCart.cart.items[m-1].product.sku,"function"==typeof OBS.addCookieValue)&&OBS.addCookieValue("CART",p),e.data.addExtendedWarrantyToCart&&e.data.addExtendedWarrantyToCart.cart&&e.data.addExtendedWarrantyToCart.cart.items&&0<(m=(l=e.data.addExtendedWarrantyToCart.cart.items).length)&&(p=e.data.addExtendedWarrantyToCart.cart.items[m-1].product.sku,"function"==typeof OBS.addCookieValue)&&OBS.addCookieValue("CART",p),e.data.addObjetSalesToCart&&e.data.addObjetSalesToCart.cart&&e.data.addObjetSalesToCart.cart.items&&0<(m=(l=e.data.addObjetSalesToCart.cart.items).length))for(var u=0;u<m;u++){var p=l[u].product.sku;"function"==typeof OBS.addCookieValue&&OBS.addCookieValue("CART",p)}if(e.data.addAddonBundlePackageToCart&&e.data.addAddonBundlePackageToCart.cart&&e.data.addAddonBundlePackageToCart.cart.items&&0<(m=(l=e.data.addAddonBundlePackageToCart.cart.items).length)&&(p=e.data.addAddonBundlePackageToCart.cart.items[m-1].product.sku,"function"==typeof OBS.addCookieValue)&&OBS.addCookieValue("CART",p),void 0!==$("#cartQuoteId")&&$("#cartQuoteId").val(""),e.data.addModelToCart&&e.data.addModelToCart.cart&&e.data.addModelToCart.cart.quote&&e.data.addModelToCart.cart.quote.quote_id&&(o=e.data.addModelToCart.cart.quote.quote_id,void 0!==$("#cartQuoteId"))&&$("#cartQuoteId").val(o),b&&(d=new Object,r=new Array,0<addToCart.$nav.find(".logged .after-login").length&&(ga360Init.cartID=v),0<$(".GPC0162").length?$(".after-item").each(function(){var e,a=$(this).closest("li");d={},$(this).hasClass("d-none")||(d.id=a.attr("data-sku"),d.name=a.attr("data-model-salesmodelcode"),e=x(a.attr("data-price"),"0"),d.price=e,d.brand=a.attr("data-buname-two"),d.category=a.attr("data-buname-one"),void 0!==a.attr("data-model-salesmodelcode")&&(d.variant=-1==a.attr("data-model-salesmodelcode").indexOf(".")?null:a.attr("data-model-salesmodelcode").substring(a.attr("data-model-salesmodelcode").indexOf(".")+1,a.attr("data-model-salesmodelcode").length)),d.quantity=1,d.dimension124=a.attr("data-buname-three"),d.dimension125=a.attr("data-super-category-name"),d.dimension126=a.attr("data-model-id"),d.dimension127=a.attr("data-model-name"),ga360Init.ecommerce.currencyCode=ga360Init.currencyCode,d.dimension185=ga360Init.obsGroup,d.metric4=a.attr("data-msrp"),d.cart_btn=ga360Init.cart_btn,r.push(d))}):(d.id=ga360Init.sku,d.name=ga360Init.name,o=x(ga360Init.price,"0"),d.price=o,d.brand=ga360Init.std_lv2,d.category=ga360Init.std_lv1,void 0!==ga360Init.name&&(d.variant=-1==ga360Init.name.indexOf(".")?null:ga360Init.name.substring(ga360Init.name.indexOf(".")+1,ga360Init.name.length)),0<m&&(d.quantity=1),d.dimension124=ga360Init.std_lv3,d.dimension125=ga360Init.superCategory,d.dimension126=ga360Init.modelCode,d.dimension127=ga360Init.displayName,ga360Init.ecommerce.currencyCode=ga360Init.currencyCode,d.dimension185=ga360Init.obsGroup,d.metric4=ga360Init.metric4,d.cart_btn=ga360Init.cart_btn,console.log(d),r.push(d)),ga360Init.ecommerce.add=new Object,ga360Init.ecommerce.add.products=r,ga360Init.addData(),ga360Init.cartID.add,o=$(this).attr("data-model-id")?$(this).attr("data-model-id"):$(this).data("modelId"),C=$(_).closest(".button").find(".pre-order"),n=$("#navigation_search"),i="","others"==(s=_dl.page_name.page_purpose)||"search"==s||"compare"==s?i=s:0<n.length?i="navigation search":0<$(_).closest(".component").length&&(i=$(_).closest(".component").attr("class").split(" ")[1]),0<$(".GPC0009").length?(s=$(".GPC0009").data("product-id"),0<C.length?(c=$(_).data("obs-pre-order-start-date")+" - "+$(_).data("obs-pre-order-end-date"),adobeTrackEvent("pre-order",{products:[{sales_model_code:findSalesModel($(_)),model_name:findModelName($(_)),value_added_to_cart:findPrice($(_)),units_added_to_cart:findModelCount($(_))}],component_id:i,pre_order_period:c,page_event:{pre_order:!0}})):s!=o?adobeTrackEvent("add-to-cart",{products:[{sales_model_code:findSalesModel($(_)),model_name:findModelName($(_)),value_added_to_cart:findPrice($(_)),units_added_to_cart:findModelCount($(_))}],cross_sell_product:s,page_event:{add_to_cart:!0}}):adobeTrackEvent("add-to-cart",{products:[{sales_model_code:findSalesModel($(_)),model_name:findModelName($(_)),value_added_to_cart:findPrice($(_)),units_added_to_cart:findModelCount($(_))}],page_event:{add_to_cart:!0}})):0<C.length?(c=$(_).data("obs-pre-order-start-date")+" - "+$(_).data("obs-pre-order-end-date"),adobeTrackEvent("pre-order",{products:[{sales_model_code:findSalesModel($(_)),model_name:findModelName($(_)),value_added_to_cart:findPrice($(_)),units_added_to_cart:findModelCount($(_))}],component_id:i,pre_order_period:c,page_event:{pre_order:!0}})):adobeTrackEvent("add-to-cart",{products:[{sales_model_code:findSalesModel($(_)),model_name:findModelName($(_)),value_added_to_cart:findPrice($(_)),units_added_to_cart:findModelCount($(_))}],page_event:{add_to_cart:!0}})),e.data.addModelToCart&&!e.data.addModelToCart.redirectUrl||e.data.addObjetSalesToCart&&!e.data.addObjetSalesToCart.redirectUrl){var g=0;if(0<m)for(u=0;u<m;u++)g+=parseInt(l[u].qty);addToCart.setCartNum(g);var h="",f=(h=0<(C=$(_).closest(".button").find(".pre-order")).length?addToCart.preOrderSuccessMsg:addToCart.successMsg,"");"uk"!=COUNTRY_CODE&&"pl"!=COUNTRY_CODE&&"it"!=COUNTRY_CODE&&"de"!=COUNTRY_CODE&&"at"!=COUNTRY_CODE&&"cz"!=COUNTRY_CODE&&"fr"!=COUNTRY_CODE&&"hu"!=COUNTRY_CODE&&"nl"!=COUNTRY_CODE&&"cac_en"!=COUNTRY_CODE&&"se"!=COUNTRY_CODE||(f="no-icon"),null==addToCart.successHTML&&h&&addToCart.successBtnAlert&&h&&addToCart.successBtnClose&&("N"==ePrivacyCookies.bannerType||"I"==ePrivacyCookies.bannerType?addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+"</a></div></div></div></div>":addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+'</a></div><div class="simple-content-box"><div class="notice '+f+'" style="display:inline-block;">'+addToCart.cookieNotice+"</div></div></div></div></div>"),null!=addToCart.successHTML&&(0<$("#addToCartSuccess").length&&$("#addToCartSuccess").remove(),$("body").find(".iw_viewport-wrapper").first().append(addToCart.successHTML),$("#addToCartSuccess").modal(),$("#addToCartSuccess").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus()}))}else if(e.data.addExtendedWarrantyToCart&&e.data.addExtendedWarrantyToCart.cart&&e.data.addExtendedWarrantyToCart.cart.items){g=0;if(0<m)for(u=0;u<m;u++)g+=parseInt(l[u].qty);addToCart.setCartNum(g);h=addToCart.successMsg,f="";"uk"!=COUNTRY_CODE&&"at"!=COUNTRY_CODE&&"cz"!=COUNTRY_CODE&&"fr"!=COUNTRY_CODE&&"hu"!=COUNTRY_CODE&&"nl"!=COUNTRY_CODE&&"cac_en"!=COUNTRY_CODE&&"se"!=COUNTRY_CODE||(f="no-icon"),null==addToCart.successHTML&&h&&addToCart.successBtnAlert&&h&&addToCart.successBtnClose&&("N"==ePrivacyCookies.bannerType||"I"==ePrivacyCookies.bannerType?addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+"</a></div></div></div></div>":addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+'</a></div><div class="simple-content-box"><div class="notice '+f+'" style="display:inline-block;">'+addToCart.cookieNotice+"</div></div></div></div></div>"),null!=addToCart.successHTML&&(0<$("#addToCartSuccess").length&&$("#addToCartSuccess").remove(),0<$("body").find(".support-wrap").length?($("body").find(".support-wrap").first().append(addToCart.successHTML),$("#modal_ew_confirm").modal("hide")):$("body").append(addToCart.successHTML),$("#addToCartSuccess").modal(),$("#addToCartSuccess").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus();var e=$(".extended-warranty").find("#wtyAddToCartCloseUrl").val();e&&(window.location.href=e)}))}else if(e.data.addAddonBundlePackageToCart&&e.data.addAddonBundlePackageToCart.cart&&e.data.addAddonBundlePackageToCart.cart.items){g=0;if(0<m)for(u=0;u<m;u++)g+=parseInt(l[u].qty);addToCart.setCartNum(g);var C,h="",f=(h=0<(C=$(_).closest(".button").find(".pre-order")).length?addToCart.preOrderSuccessMsg:addToCart.successMsg,"");"uk"!=COUNTRY_CODE&&"pl"!=COUNTRY_CODE&&"it"!=COUNTRY_CODE&&"de"!=COUNTRY_CODE&&"at"!=COUNTRY_CODE&&"cz"!=COUNTRY_CODE&&"fr"!=COUNTRY_CODE&&"hu"!=COUNTRY_CODE&&"nl"!=COUNTRY_CODE&&"cac_en"!=COUNTRY_CODE&&"se"!=COUNTRY_CODE||(f="no-icon"),null==addToCart.successHTML&&h&&addToCart.successBtnAlert&&h&&addToCart.successBtnClose&&("N"==ePrivacyCookies.bannerType||"I"==ePrivacyCookies.bannerType?addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+"</a></div></div></div></div>":addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+h+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary">'+addToCart.successBtnAlert+'</a></div><div class="simple-content-box"><div class="notice '+f+'" style="display:inline-block;">'+addToCart.cookieNotice+"</div></div></div></div></div>"),null!=addToCart.successHTML&&(0<$("#addToCartSuccess").length&&$("#addToCartSuccess").remove(),$("body").find(".iw_viewport-wrapper").first().append(addToCart.successHTML),$("#addToCartSuccess").modal(),$("#addToCartSuccess").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus()}))}else location.href=e.data.addModelToCart.redirectUrl}$("body").trigger("ajaxLoadEnd")},error:function(e,a,t){$("body").trigger("ajaxLoadEnd")},complete:function(){var e,a,t,o,d,r,n;void 0!==$("#exchangeProgramUseFlag")&&null!=$("#exchangeProgramUseFlag").val()&&"Y"==$("#exchangeProgramUseFlag").val()&&(e="",void 0!==$("#cartQuoteId")&&""!=$("#cartQuoteId").val()&&(e=$("#cartQuoteId").val()),a="",a=$(".exchange-detail").attr("data-bonusprice"),t=$(".exchange-detail").attr("data-categoryid"),o=$(".exchange-detail").attr("data-typeid"),d=$(".exchange-detail").attr("data-brandid"),r=$(".exchange-detail").attr("data-condition"),n=$(".exchange-detail").attr("data-exmodelname"),"in"==addToCart.store&&""!=a&&""!=e?$.ajax({url:i,headers:s,type:"post",data:JSON.stringify({query:"{ add_exchange_information_to_quote(quote_id:"+e+", product_type_id:"+t+", model_type_id:"+o+", brand_id:"+d+', product_condition:"'+r+'", bonus:"'+a+'", exchange_product_name:"'+n+'", estimated_delivery_date:"" ) {Status,Message,Detail{quote_id}} }',variables:null,operationName:null}),dataType:"json",success:function(e){if(e.errors)for(var a=0;a<e.errors.length;a++)e.errors[a].message;else{var t=!0,o="";e.data&&e.data.add_exchange_information_to_quote&&0==e.data.add_exchange_information_to_quote.Status&&(t=!1,o=e.data.add_exchange_information_to_quote.Message),0==t&&"Smart exchange information existed in this quote."==o?$("#model-exist-alert").modal():console.log(e)}},error:function(e,a,t){$("body").trigger("ajaxLoadEnd")}}):console.log("quoteId="+e+", fail api add_exchange_information_to_quote"))}})},getGNBCart:function(){var e,a,t=addToCart.$nav.data("cart-check");t&&addToCart.cartID&&(a={},""!=(e=k.getToken())&&(a.Authorization="Bearer "+e),a.Store=addToCart.$nav.data("store"),a["Content-type"]="application/json",$.ajax({url:t,headers:a,type:"post",data:JSON.stringify({query:'{cart(cart_id: "'+addToCart.cartID+'") { items { product {  sku name } qty } }}',variables:null,operationName:null}),dataType:"json",success:function(e){if(!e.errors){var a=e.data.cart.items.length,t=0;if(0<a){for(var o=0;o<a;o++)t+=parseInt(e.data.cart.items[o].qty);addToCart.setCartNum(t)}}},error:function(e,a,t){}}))},checkSale:function(a,e,p){var t=addToCart.url,g=$("html").data("countrycode").toUpperCase(),h="<span class='check-fail'>"+y.find("#pinValid").val()+"</span>",o=null,d={};if(d.Store=addToCart.$nav.data("store"),d["Content-type"]="application/json","AU"==g)if(0<$(".GPC0009").find(".add-bundle-area").length){$(".GPC0009 .add-bundle-area .bundle-list .bundle-select a").removeClass("act available disabled"),$(".GPC0009 .add-bundle-area .bundle-list .bundle-select a").find(".bundle-unable").addClass("d-none");var r=a.split(",");let e="";for(var n=0;n<r.length;n++)e+='{ sku: "'+r[n]+'" ,qty: 1},';e=e.substring(0,e.length-1),o=JSON.stringify({query:'{checkSaleMulti(pincode: "'+p+'",model:['+e+"]) {model{sku},message}}",variables:null})}else o=JSON.stringify({query:'{AuCheckSale(sku: "'+a+'", qty: '+e+', postcode: "'+p+'") {message, deliveryLeadTime}}',variables:null});else o="MX"==g?JSON.stringify({query:'{MxCheckSale(sku: "'+a+'", qty: '+e+', pincode: "'+p+'") {message, mxdelivery_check}}',variables:null}):"BR"==g?JSON.stringify({query:'{BrCheckSale(sku: "'+a+'", qty: '+e+', postcode: "'+p+'") {message, deliveryLeadTime}}',variables:null}):"IN"==g?JSON.stringify({query:'{checkEwPincode(pincode: "'+p+'") {isEwPincodeAvailable}checkSale(sku: "'+a+'", qty: '+e+", pincode: "+p+") {message, deliveryLeadTime}}",variables:null}):JSON.stringify({query:'{checkSale(sku: "'+a+'", qty: '+e+", pincode: "+p+") {message, deliveryLeadTime}}",variables:null});(0<y.find(".check-fail").length||0<y.find(".check-good").length)&&y.find(".check-fail").remove(),y.find(".check-good").remove(),$.ajax({url:t,headers:d,type:"post",data:o,dataType:"json",success:function(e){var a=null;if(e.errors)$(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").show().append($(h)):$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").show().append($(h)),0<$(".GPC0010").length&&($('.GPC0010 .products-list-wrap input[type="checkbox"]').attr("disabled",!0).prop("checked",!1),$('.GPC0010 .products-list-wrap input[type="radio"]').attr("disabled",!0).prop("checked",!1),packageComponent.sumPrice());else{var t=!1;if("AU"==g)if(0<$(".GPC0009").find(".add-bundle-area").length){if((a=e.data.checkSaleMulti).model&&0<a.model.length){for(var o=0;o<a.model.length;o++)$(".GPC0009").data("model-id")==a.model[o].sku&&(t=!0);$(".GPC0009").find(".add-bundle-area").data("main-model-flag",t).attr("data-main-model-flag",t)}}else a=e.data.AuCheckSale;else a="MX"==g?e.data.MxCheckSale:"BR"==g?e.data.BrCheckSale:e.data.checkSale;var d=$(".pincode-get-stock-alert-use-flag").val(),r=($(".getStockAlert-area").removeClass("act"),null);if("IN"==g&&(r=e.data.checkEwPincode.isEwPincodeAvailable),""!=a.deliveryLeadTime&&null!=a.deliveryLeadTime&&"undefined"!=a.deliveryLeadTime&&"number"==typeof a.deliveryLeadTime||"undefined"!=a.mxdelivery_check&&""!=a.mxdelivery_check&&null!=a.mxdelivery_check&&"1"==a.mxdelivery_check||"BR"==g&&"undefined"!=a.deliveryLeadTime&&""!=a.deliveryLeadTime&&null!=a.deliveryLeadTime&&"number"==typeof a.deliveryLeadTime&&0<a.deliveryLeadTime||""!=e.data.checkSaleMulti&&"undefined"!=e.data.checkSaleMulti&&t){"MX"!=g&&((e=new Date).setDate(e.getDate()+a.deliveryLeadTime),n=e.getDate(),i=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]);var n,i,s=y.find("#pinCodeList").val(),e=y.find("#pinOK").val(),c=y.find("#pinSuccessMsg").val(),l=y.find("#pinChangeMsg").val(),m=y.find(".pre-order-day"),e="<p class='pincode-ok'>"+e+"</p>",u="",u="MX"==g?(c=""!=a.message?a.message:y.find("#pinSuccessMsg").val(),"<div class='check-good' data-pin-code="+p+">"+e+"<p>"+c.replace(/\*noMessage\*/g,"")+"</p><a href='#' role='button'><span>"+l+"</span></a></div>"):"IN"==g&&0<m.length?"<div class='check-good' data-pin-code="+p+">"+e+"<a href='#' role='button'><span>"+l+"</span></a></div>":"<div class='check-good' data-pin-code="+p+">"+e+"<p>"+c.replace(/\*dateplus\*/g,n).replace(/\*month\*/g,i).replace(/\*noMessage\*/g,"")+"</p><a href='#' role='button'><span>"+l+"</span></a></div>";if($(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").show().append($(u)):$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").show().append($(u)),$(".GPC0009").hasClass("before")?(0<y.find(".delivery-list .option-list").length?y.find(".option-list"):y.find(".check-pincode")).hide():$(".GPC0009").hasClass("improve")&&(0<y.find(".checkStock-list .option-list").length?y.find(".option-list"):y.find(".check-pincode")).hide(),y.find(".chkStBox a.btn-sm").hide(),y.find(".add-to-cart").attr({"data-link-area":"pdp_main-btn","data-link-name":"add_to_cart"}),$(".GPC0011").find(".button .add-to-cart").attr({"data-link-area":"pdp_tab_anchor-tab","data-link-name":"add_to_cart"}),a.model){if(0<a.model.length)for(o=0;o<a.model.length;o++)$(".GPC0009 .add-bundle-area .bundle-list .bundle-select").each(function(){$(this).data("modelid")==a.model[o].sku&&($(this).find("a").addClass("available"),$(this).find(".bundle-unable").addClass("d-none"))});$(".GPC0009 .add-bundle-area .bundle-list .bundle-select a").not(".available").each(function(){$(this).addClass("disabled"),$(this).find(".bundle-unable").removeClass("d-none")})}y.find(".check-good a").on("click",function(e){e.preventDefault(),$(".GPC0009 .add-bundle-area .bundle-list .bundle-select a").removeClass("act available disabled"),$(".GPC0009 .add-bundle-area .bundle-list .bundle-select a").find(".bundle-unable").addClass("d-none"),y.find(".check-good").remove(),$(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").hide():$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").hide(),$(".GPC0009").hasClass("before")?0<y.find(".delivery-list .option-list").length?(y.find(".option-list").show(),$(s).trigger("chosen:activate"),y.find(".check-pincode").focus(),y.find(".pdp-info.desktop-info .chosen-initialized").hide()):y.find(".check-pincode").val("").show().focus():$(".GPC0009").hasClass("improve")&&(0<y.find(".checkStock-list .option-list").length?(y.find(".option-list").show(),$(s).trigger("chosen:activate"),y.find(".check-pincode").focus(),y.find(".pdp-info.desktop-info .chosen-initialized").hide()):y.find(".check-pincode").val("").show().focus()),y.find(".chkStBox a.btn-sm").show(),y.find(".add-to-cart").removeAttr("data-link-area"),y.find(".add-to-cart").removeAttr("data-link-name"),$(".GPC0011").find(".button .add-to-cart").removeAttr("data-link-area"),$(".GPC0011").find(".button .add-to-cart").removeAttr("data-link-name")}),0<$(".GPC0010").length&&($('.GPC0010 .products-list-wrap input[type="checkbox"]').removeAttr("disabled"),$('.GPC0010 .products-list-wrap input[type="radio"]').removeAttr("disabled"))}else"Error"==a.message?($(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").show().append($(h)):$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").show().append($(h)),0<$(".GPC0010").length&&($('.GPC0010 .products-list-wrap input[type="checkbox"]').attr("disabled",!0).prop("checked",!1),$('.GPC0010 .products-list-wrap input[type="radio"]').attr("disabled",!0).prop("checked",!1),packageComponent.sumPrice())):(!t&&"AU"==g&&0<$(".GPC0009").find(".add-bundle-area").length&&""==a.message&&(a.message=$(".GPC0009").find(".add-bundle-area").data("mainOutMsg")),m="<span class='check-fail'>"+a.message+"</span>","BR"==g&&(e=a.message,c=y.find("#pinApiMsg1").val(),n=y.find("#pinApiMsg2").val(),c==a.message?e=y.find("#pinFailMsg1").val():n==a.message&&(e=y.find("#pinFailMsg2").val()),m="<span class='check-fail'>"+e+"</span>"),$(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").show().append($(m)):$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").show().append($(m)),0<$(".GPC0010").length&&($('.GPC0010 .products-list-wrap input[type="checkbox"]').attr("disabled",!0).prop("checked",!1),$('.GPC0010 .products-list-wrap input[type="radio"]').attr("disabled",!0).prop("checked",!1),packageComponent.sumPrice()),"Y"==d&&0==a.deliveryLeadTime&&1==r&&$(".getStockAlert-area").addClass("act"));"IN"==g&&(dataLayer.push({event:"pincode_input_by_visitor",pincode:p}),dataLayer.push({event:"checksale_message",message:a.message}),dataLayer.push({event:"check_pincode",pincodeAvailable:r}))}$("body").trigger("ajaxLoadEnd")},error:function(e,a,t){console.log("checkSale code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+t),$(".GPC0009").hasClass("before")?y.find(".delivery-list .error-msg").show().append($(h)):$(".GPC0009").hasClass("improve")&&y.find(".checkStock-list .error-msg").show().append($(h)),$("body").trigger("ajaxLoadEnd"),"IN"==g&&(t=JSON.parse(e.responseText),dataLayer.push({event:"pincode_input_by_visitor",pincode:p}),dataLayer.push({event:"checksale_message",message:t.errors[0].message}),dataLayer.push({event:"check_pincode",pincodeAvailable:!1}))}})},comunaChange:function(e){var e=$(e.currentTarget),a=e.serialize(),e=e.data("url");$(".checkAvailable a.btn-sm").addClass("disabled"),"cl"!=COUNTRY_CODE&&y.find(".add-to-cart").addClass("disabled"),(0<y.find(".check-fail").length||0<y.find(".check-good").length)&&y.find(".check-fail").remove(),y.find(".check-good").remove(),$.ajax({type:"post",url:e,dataType:"json",data:a,success:function(e){if(e.result){var a,t=isMobile||$(window).width()<767?$(".check-comuna"):$("#comuna"),o=e.comunaList,d='<option value="" selected disabled>'+t.data("placeholder")+"</option>";for(a in o)d+='<option value="'+o[a].value+'">'+o[a].code+"</option>";t.html(d),t.prop("disabled",!1),t.trigger("chosen:updated"),t.on("change",function(e){$(".checkAvailable a.btn-sm").removeClass("disabled"),"cl"!=COUNTRY_CODE&&y.find(".add-to-cart").addClass("disabled"),(0<y.find(".check-fail").length||0<y.find(".check-good").length)&&y.find(".check-fail").remove(),y.find(".check-good").remove()})}},error:function(e,a,t){console.log("comunaChange code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+t)}})},checkComuna:function(e){var a=$("#comuna").data("comuna-url"),d=($("html").data("countrycode"),"<span class='check-fail'>"+y.find("#pinValid").val()+"</span>");addToCart.$nav.data("store"),(0<y.find(".check-fail").length||0<y.find(".check-good").length)&&y.find(".check-fail").remove(),y.find(".check-good").remove(),$.ajax({type:"post",url:a+"/"+e,dataType:"json",success:function(e){var a=e.available_shipping_message,t=e.delivery_day_message,e=e.add_to_cart,o="";1==e?(o="<div class='check-good'><p class='available-ok'>"+a+"<br>"+t+"</p></div>",$(".error-msg").append(o).show(),y.find(".add-to-cart").removeClass("disabled")):(0==e?(o="<span class='check-fail'>"+a+"</span>",$(".error-msg").append(o)):$(".error-msg").append(d)).show(),$("body").trigger("ajaxLoadEnd")},error:function(e,a,t){console.log("checkComuna code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+t),$(".error-msg").append(d).show(),"cl"!=COUNTRY_CODE&&y.find(".add-to-cart").addClass("disabled"),$("body").trigger("ajaxLoadEnd")}})}}),r=function(t,e){return!!t&&!(!$(".navigation").data("cart-add")||""==$(".navigation").data("cart-add"))&&(k.getToken(),void $.ajax({url:$(".navigation").data("cart-add"),type:"post",data:{sku:t},xhrFields:{withCredentials:!0},dataType:"json",success:function(e){var a;1!=e.result?(a=e.message,0<$("#addToCartError").length&&$("#addToCartError").remove(),a='<div class="modal modal-simple fade" id="addToCartError" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Fail to add Cart" aria-describedby="addToCartFailDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartFailDialog">'+a+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+addToCart.successBtnClose+"</button></div></div></div></div>",$("body").append(a),$("#addToCartError").modal(),$("#addToCartError").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus()})):(a=addToCart.successMsg,e.message&&""!=e.message&&null!=e.message&&(a=e.message),"function"==typeof OBS.addCookieValue&&OBS.addCookieValue("CART",t),e=e.totalQty,addToCart.setCartNum(e),e="","uk"!=COUNTRY_CODE&&"at"!=COUNTRY_CODE&&"cz"!=COUNTRY_CODE&&"fr"!=COUNTRY_CODE&&"hu"!=COUNTRY_CODE&&"nl"!=COUNTRY_CODE&&"cac_en"!=COUNTRY_CODE&&"se"!=COUNTRY_CODE||(e="no-icon"),null==addToCart.successHTML&&a&&addToCart.successBtnAlert&&a&&addToCart.successBtnClose&&("N"==ePrivacyCookies.bannerType||"I"==ePrivacyCookies.bannerType?addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+a+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary btn-block">'+addToCart.successBtnAlert+"</a></div></div></div></div>":addToCart.successHTML='<div class="modal modal-simple fade" id="addToCartSuccess" tabindex="-1" role="dialog" data-backdrop="false" aria-label="Add to Cart" aria-describedby="addToCartSuccessDialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="simple-content-box"><div class="content-paragraph" id="addToCartSuccessDialog">'+a+'</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">'+addToCart.successBtnClose+'</button><a href="'+xssfilter(addToCart.$nav.find(".cart a").attr("href"))+'" class="btn btn-primary btn-block">'+addToCart.successBtnAlert+'</a></div><div class="simple-content-box"><div class="notice '+e+'" style="display:inline-block;">'+addToCart.cookieNotice+"</div></div></div></div></div>"),null!=addToCart.successHTML&&(0<$("#addToCartSuccess").length&&$("#addToCartSuccess").remove(),$("body").append(addToCart.successHTML),$("#addToCartSuccess").modal(),$("#addToCartSuccess").find("button[data-dismiss=modal]").on("click.close",function(){addToCart.currentFocus()}))),$("body").trigger("ajaxLoadEnd")},error:function(e,a,t){$("body").trigger("ajaxLoadEnd")}}))},o=function(){if(!$(".navigation").data("cart-check")||""==$(".navigation").data("cart-check"))return!1;$.ajax({url:$(".navigation").data("cart-check"),type:"post",xhrFields:{withCredentials:!0},dataType:"json",success:function(e){e.totalQty&&(e=e.totalQty,addToCart.setCartNum(e)),$("body").trigger("ajaxLoadEnd")},error:function(e,a,t){$("body").trigger("ajaxLoadEnd")}})};function x(e,a){e+="";return""==(e=e.trim())||null==e||"null"==e||"undefined"==e?a:e}function n(e){var a,t,e=e+"";return e=(e=""!=(e=e.trim())&&null!=e&&"null"!=e&&"undefined"!=e?e:"").replace(/\s\s+/g," "),a="_",t=" ",e=e.split(a).join(t)}(reStockAlert={callReStockAlert:function(e,a){if(!e||!a)return!1;$.ajax({type:"post",url:e,dataType:"html",data:xssfilter(a),success:function(e){$("body").trigger("ajaxLoadEnd"),$("#modal_re_stock_alert").remove(),$("body").append(e),$("#modal_re_stock_alert").modal(),reStockAlert.autoValidationForm(),setTimeout(function(){$("#modal_re_stock_alert").css("display","none").css("display","block")},500)},error:function(e,a,t){$("body").trigger("ajaxLoadEnd"),console.log("status: "+a),console.log("error: "+t)}})},autoValidationForm:function(){$("#modal_re_stock_alert .re-stock-alert-form").on({ajaxLoadBefore:function(e){e.stopPropagation(),$(this).append('<div class="loading-circle"><div class="lds-dual-ring"></div></div>')},ajaxLoadEnd:function(e){e.stopPropagation(),$(this).find(".loading-circle").remove()}}),$("#reStockAlertForm").on({submit:function(e){e.preventDefault(),$("#modal_re_stock_alert .re-stock-alert-form").trigger("ajaxLoadBefore");var a,e=$(this);e.checkValidation()?(a=e.data("url"),e=e.serialize(),ajax.noCacheCall(a,e,"json",function(e){var a;$("#modal_re_stock_alert .re-stock-alert-form").trigger("ajaxLoadEnd"),e.returnCode?($("#modal_re_stock_alert .re-stock-alert-form").hide(),a=e.returnCode,e.contactFlag,"00"==a?(dataLayer.push({event:"complete_stock_request_click",superCategory:$("#reStockAlertForm").attr("data-super-category-name"),category:$("#reStockAlertForm").attr("data-category-name"),subcategory:$("#reStockAlertForm").attr("data-sub-category-name"),modelYear:$("#reStockAlertForm").attr("data-model-year"),modelName:$("#reStockAlertForm").attr("data-model-name"),modelCode:$("#reStockAlertForm").attr("data-model-id"),salesModelCode:$("#reStockAlertForm").attr("data-model-salesmodelcode"),sku:$("#reStockAlertForm").attr("data-sku"),suffix:$("#reStockAlertForm").attr("data-model-suffixcode"),bu:$("#reStockAlertForm").attr("data-bu"),price:$("#reStockAlertForm").attr("data-price"),currencyCode:$(".currency-code").val(),dimension185:$(".navigation").attr("data-obs-group"),metric4:$("#reStockAlertForm").attr("data-msrp")}),console.log("complete_stock_request_click"),$("#modal_re_stock_alert .result-success").show()):"01"==a?$("#modal_re_stock_alert .result-duplicate").show():"98"==a?($("#modal_re_stock_alert .re-stock-alert-form").show(),0==(a=$("#txtBoxPostcode").parents(".field-block")).find(".ajax-msg").length&&$("#txtBoxPostcode").parent().find(".error-msg").append('<span class="ajax-msg"></span>'),a.addClass("error").find(".ajax-msg").html(e.error).show().siblings().hide()):$("#modal_re_stock_alert .result-error").show()):($("#modal_re_stock_alert .re-stock-alert-form").hide(),$("#modal_re_stock_alert .result-error").show())},"post","#modal_re_stock_alert .re-stock-alert-form")):$("#modal_re_stock_alert .re-stock-alert-form").trigger("ajaxLoadEnd")}}),$("#reStockAlertSubmit").click(function(e){e.preventDefault(),$("#reStockAlertForm").trigger("submit")})},init:function(){$("body").off("click.restockalert").on("click.restockalert",".re-stock-alert",function(e){e.preventDefault();var a,e=$(this).data("url"),t={};t.subCategoryName=$(this).data("sub-category-name"),t.categoryName=$(this).data("category-name"),t.superCategoryName=$(this).data("super-category-name"),t.modelYear=$(this).data("model-year"),t.modelName=$(this).data("model-name"),t.modelCode=$(this).data("model-id"),t.salesModelCode=$(this).data("model-salesmodelcode"),t.sku=$(this).data("sku"),t.suffixCode=$(this).data("model-suffixcode"),t.modelId=$(this).data("model-id"),t.bu=$(this).data("bu"),t.price=$(this).data("price"),t.currencyCode=$(".currency-code").val(),t.dimension185=$(".navigation").attr("data-obs-group"),t.metric4=$(this).attr("data-msrp"),0<$(".GPC0009").length&&(a=$(".GPC0009").data("product-id"))!=$(this).data("model-id")?adobeTrackEvent("re-stock-alert",{products:[{sales_model_code:findSalesModel($(this)),model_name:findModelName($(this))}],cross_sell_product:a,page_event:{re_stock_alert:!0}}):adobeTrackEvent("re-stock-alert",{products:[{sales_model_code:findSalesModel($(this)),model_name:findModelName($(this))}],page_event:{re_stock_alert:!0}}),$("body").trigger("ajaxLoadBefore"),reStockAlert.callReStockAlert(e,t)})}}).init(),exchangeProgram={autoValidationForm:function(){$("#exchange_product .exchange-program-pincode-form, .exchange-program-category-form, .exchange-program-type-form, .exchange-program-brand-form, .exchange-program-price-form").on({ajaxLoadBefore:function(e){e.stopPropagation(),$(this).append('<div class="loading-circle"><div class="lds-dual-ring"></div></div>')},ajaxLoadEnd:function(e){e.stopPropagation(),$(this).find(".loading-circle").remove()}}),$("#exchangeProgramPincodeForm").on({submit:function(e){e.preventDefault(),$("#exchange_product .exchange-program-pincode-form").trigger("ajaxLoadBefore");var a,e=$(this);e.checkValidation()?(a=e.data("url"),e=e.serialize(),ajax.noCacheCall(a,e,"json",function(e){$("#exchange_product .exchange-program-pincode-form").trigger("ajaxLoadEnd");var t,a='<span class="check-fail-exchange">Exchange not available in your area</span>';e.returnCode&&"00"==e.returnCode?(e=e.categoryList,t="",$.each(e,function(e,a){t+='<button type="button" class="chk-item exchangeProgramCategorySubmit" value='+a.Id+">"+a.Description+"</button>"}),$("#exchange_product .exchange-program-category-form .chk-item-box").html(t),$("#sec_step_1").addClass("is-show"),$(".navigation").hasClass("mobile-device")?(e=$("#sec_step_1").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:e},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",$("#sec_step_1"),{scrollInertia:300}),$("#exchange_product .exchange-program-pincode-form .error-msg").show().html('<div class="check-good-exchange"><p class="pincode-ok">Exchange available in your area</p></div>')):$("#exchange_product .exchange-program-pincode-form .error-msg").show().html(a)},"post","#exchange_product .exchange-program-pincode-form")):$("#exchange_product .exchange-program-pincode-form").trigger("ajaxLoadEnd")}}),$(document).on("keypress",".inp-pincode",function(e){"13"==e.keyCode&&(e.preventDefault(),exchangeProgram.reSelectInit(),$(".chk-step-li").removeClass("is-show"),$(".chk-completion").removeClass("is-completed"),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1),$("#exchangeProgramPincodeForm .error-msg").empty(),$("#exchangeProgramPincodeForm").trigger("submit"))}),$(document).on("click","#exchangeProgramPincodeSubmit",function(e){e.preventDefault(),exchangeProgram.reSelectInit(),$(".chk-step-li").removeClass("is-show"),$(".chk-completion").removeClass("is-completed"),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1),$("#exchangeProgramPincodeForm .error-msg").empty(),$("#exchangeProgramPincodeForm").trigger("submit")});var o=[],r=[];$(document).on("submit","#exchangeProgramCategoryForm",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#exchange_product .exchange-program-category-form").trigger("ajaxLoadBefore");var a,e=$(this);e.checkValidation()?(a=e.data("url"),e=e.serialize(),o=[],r=[],ajax.noCacheCall(a,e,"json",function(e){var t;$("#exchange_product .exchange-program-category-form").trigger("ajaxLoadEnd"),e.returnCode&&"00"==e.returnCode?(e=e.typeList,t="",$.each(e,function(e,a){void 0===a.Description.split(" (")[1]||2==a.ProductCatId?r.push({type1:a.Description.split(" (")[0],type2:null,value:a.Id}):r.push({type1:a.Description.split(" (")[0],type2:"("+a.Description.split(" (")[1],value:a.Id}),o.includes(a.Description.split(" (")[0])||(void 0===a.Description.split(" (")[1]||2==a.ProductCatId?t+='<button type="button" class="chk-item exchangeProgramTypeSubmit branding" value="'+a.Id+'">'+a.Description.split(" (")[0]+"</button>":t+='<button type="button" class="chk-item exchangeProgramTypeSubmit" value="'+a.Description.split(" (")[0]+'">'+a.Description.split(" (")[0]+"</button>",o.push(a.Description.split(" (")[0]))}),$("#exchange_product .exchange-program-type-form .chk-item-box").html(t),$("#sec_step_2").addClass("is-show"),$(".navigation").hasClass("mobile-device")?(e=$("#sec_step_2").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:e},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",$("#sec_step_2"),{scrollInertia:300})):console.log("exchange program fail")},"post","#exchange_product .exchange-program-category-form")):$("#exchange_product .exchange-program-category-form").trigger("ajaxLoadEnd")}),$(document).on("click",".exchangeProgramCategorySubmit",function(e){e.preventDefault(),e.stopImmediatePropagation(),exchangeProgram.reSelectInit(),$(this).parent().find("button").removeClass("is-selected"),$(this).addClass("is-selected"),"Refrigerator"==$(this).text()?($("#condition-excellent").siblings(".ex").html($("#exchangeProgramConditionRF1").val()),$("#condition-good").siblings(".ex").html($("#exchangeProgramConditionRF2").val()),$("#condition-averge").siblings(".ex").html($("#exchangeProgramConditionRF3").val())):"Washing Machine"==$(this).text()?($("#condition-excellent").siblings(".ex").html($("#exchangeProgramConditionWM1").val()),$("#condition-good").siblings(".ex").html($("#exchangeProgramConditionWM2").val()),$("#condition-averge").siblings(".ex").html($("#exchangeProgramConditionWM3").val())):"Television"==$(this).text()?($("#condition-excellent").siblings(".ex").html($("#exchangeProgramConditionTV1").val()),$("#condition-good").siblings(".ex").html($("#exchangeProgramConditionTV2").val()),$("#condition-averge").siblings(".ex").html($("#exchangeProgramConditionTV3").val())):"Air Conditioner"==$(this).text()&&($("#condition-excellent").siblings(".ex").html($("#exchangeProgramConditionAC1").val()),$("#condition-good").siblings(".ex").html($("#exchangeProgramConditionAC2").val()),$("#condition-averge").siblings(".ex").html($("#exchangeProgramConditionAC3").val())),$("#sec_step_2, #sec_step_3, #sec_step_4").removeClass("is-show"),$("#sec_step_2").find(".typeB").remove(),$("#sec_step_2").find(".typeB_li").remove(),$(".chk-completion").removeClass("is-completed"),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1);e='<input type="hidden" id="categoryId" name="categoryId" value='+$(this).val()+">";1<=$("#exchangeProgramCategoryForm #categoryId").length?$("#exchangeProgramCategoryForm #categoryId").val($(this).val()):$("#exchangeProgramCategoryForm").append(e),$("#exchangeProgramCategoryForm").trigger("submit")}),$(document).on("submit","#exchangeProgramTypeForm",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#exchange_product .exchange-program-type-form").trigger("ajaxLoadBefore");var a,e=$(this);e.checkValidation()?(a=e.data("url"),e=e.serialize(),ajax.noCacheCall(a,e,"json",function(e){var a,t;$("#exchange_product .exchange-program-type-form").trigger("ajaxLoadEnd"),e.returnCode&&"00"==e.returnCode?(a=0<$("#sec_step_2_1").length?(a=$("#sec_step_3 .tit").html()).replace("Step 3","Step 4"):(a=$("#sec_step_3 .tit").html()).replace("Step 4","Step 3"),$("#sec_step_3 .tit").html(a),a=e.brandList,t="",$.each(a,function(e,a){"LG"!=a.Name&&"Samsung"!=a.Name&&"Others"!=a.Name||(t+='<button type="button" class="chk-item exchangeProgramBrandSubmit" value='+a.Id+">"+a.Name+"</button>")}),$("#exchange_product .exchange-program-brand-form .chk-item-box").html(t),$("#sec_step_3").addClass("is-show"),$(".navigation").hasClass("mobile-device")?(e=$("#sec_step_3").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:e},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",$("#sec_step_3"),{scrollInertia:300})):console.log("exchange program fail")},"post","#exchange_product .exchange-program-type-form")):$("#exchange_product .exchange-program-type-form").trigger("ajaxLoadEnd")}),$(document).on("click",".exchangeProgramTypeSubmit",function(e){e.preventDefault(),e.stopImmediatePropagation(),exchangeProgram.reSelectInit();var a,t,o=$(this).val(),d="",e=!!$(this).hasClass("branding");$(this).parent().hasClass("typeB")||($("#sec_step_2").find(".typeB").remove(),$("#sec_step_2").find(".typeB_li").remove()),e||(r.forEach(function(e,a){var t;e.type1===o&&(t=(t=e.type2).replace(/[()]/g,""),d+='<button type="button" class="chk-item exchangeProgramTypeSubmit branding" value="'+e.value+'">'+t+"</button>")}),t=$("#exchangeProgramStepTitle2-1-rf").val(),a=$("#exchangeProgramStepTitle2-1-tv").val(),"Refrigerator"==$(".exchangeProgramCategorySubmit.is-selected").text()?$("#sec_step_2").find(".chk-item-box").after('<li class="chk-step-li is-show typeB_li" id="sec_step_2_1"><strong class="tit">'+t+'</strong><div class="chk-item-box typeB">'+d+"</div></li>"):"Television"==$(".exchangeProgramCategorySubmit.is-selected").text()&&$("#sec_step_2").find(".chk-item-box").after('<li class="chk-step-li is-show typeB_li" id="sec_step_2_1"><strong class="tit">'+a+'</strong><div class="chk-item-box typeB">'+d+"</div></li>"),$(".navigation").hasClass("mobile-device")?(t=$("#sec_step_2_1").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:t},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",$("#sec_step_2_1"),{scrollInertia:300})),$(this).parent().find("button").removeClass("is-selected"),$(this).addClass("is-selected"),$("#sec_step_3, #sec_step_4").removeClass("is-show"),$(".chk-completion").removeClass("is-completed"),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1),e&&(a='<input type="hidden" id="categoryId" name="categoryId" value='+$("#exchangeProgramCategoryForm input[name=categoryId]").val()+">",t='<input type="hidden" id="typeId" name="typeId" value='+$(this).val()+">",1<=$("#exchangeProgramTypeForm #categoryId").length?$("#exchangeProgramTypeForm #categoryId").val($("#exchangeProgramCategoryForm input[name=categoryId]").val()):$("#exchangeProgramTypeForm").append(a),1<=$("#exchangeProgramTypeForm #typeId").length?$("#exchangeProgramTypeForm #typeId").val($(this).val()):$("#exchangeProgramTypeForm").append(t),$("#exchangeProgramTypeForm").trigger("submit"))}),$(document).on("submit","#exchangeProgramBrandForm",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#exchange_product .exchange-program-brand-form").trigger("ajaxLoadBefore");var a,e=$(this);e.checkValidation()?(a=e.data("url"),e=e.serialize(),ajax.noCacheCall(a,e,"json",function(e){var a,t,o;$("#exchange_product .exchange-program-brand-form").trigger("ajaxLoadEnd"),e.returnCode&&"00"==e.returnCode?(a=0<$("#sec_step_2_1").length?(a=$("#sec_step_4 .tit").html()).replace("Step 4","Step 5"):(a=$("#sec_step_4 .tit").html()).replace("Step 5","Step 4"),$("#sec_step_4 .tit").html(a),t=(a=e.priceList[0]).Price,o=a.Mid_Price,a=a.Min_Price,$("#condition-excellent").attr("value",t),$("#condition-good").attr("value",o),$("#condition-averge").attr("value",a),t=e.modelName,1<=$("#exchangeProgramBrandForm #exModelName").length?$("#exchangeProgramBrandForm #exModelName").val(t):$("#exchangeProgramBrandForm").append('<input type="hidden" id="exModelName" name="exModelName" value="'+t+'">'),$(".txt-prd .fc-carmine").html(t),$("#sec_step_4").addClass("is-show"),$(".navigation").hasClass("mobile-device")?(o=$("#sec_step_4").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:o},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",$("#sec_step_4"),{scrollInertia:300})):console.log("exchange program fail")},"post","#exchange_product .exchange-program-brand-form")):$("#exchange_product .exchange-program-brand-form").trigger("ajaxLoadEnd")}),$(document).on("click",".exchangeProgramBrandSubmit",function(e){e.preventDefault(),e.stopImmediatePropagation(),exchangeProgram.reSelectInit(),$(this).parent().find("button").removeClass("is-selected"),$(this).addClass("is-selected"),$("#sec_step_4").removeClass("is-show"),$(".chk-completion").removeClass("is-completed"),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1);var e='<input type="hidden" id="categoryId" name="categoryId" value='+$("#exchangeProgramTypeForm input[name=categoryId]").val()+">",a='<input type="hidden" id="typeId" name="typeId" value='+$("#exchangeProgramTypeForm input[name=typeId]").val()+">",t='<input type="hidden" id="brandId" name="brandId" value='+$(this).val()+">";1<=$("#exchangeProgramBrandForm #categoryId").length?$("#exchangeProgramBrandForm #categoryId").val($("#exchangeProgramTypeForm input[name=categoryId]").val()):$("#exchangeProgramBrandForm").append(e),1<=$("#exchangeProgramBrandForm #typeId").length?$("#exchangeProgramBrandForm #typeId").val($("#exchangeProgramTypeForm input[name=typeId]").val()):$("#exchangeProgramBrandForm").append(a),1<=$("#exchangeProgramBrandForm #brandId").length?$("#exchangeProgramBrandForm #brandId").val($(this).val()):$("#exchangeProgramBrandForm").append(t),$("#exchangeProgramBrandForm").trigger("submit")}),$(document).on("click",".exchangeProgramPriceSubmit",function(e){exchangeProgram.reSelectInit(),$(".chk-completion").addClass("is-completed"),$(".navigation").hasClass("mobile-device")?(a=$(".chk-completion").position().top,$("#exchange_product").find(".js-scroll").stop().delay(100).animate({scrollTop:a},400)):$("#exchange_product").find(".js-scroll").mCustomScrollbar("scrollTo",".chk-completion",{scrollInertia:300});var a=$("input[name=exc_step_4]:checked");$(".prd-detail-condition").html(a.siblings(".text").text()),$(".fw-sb .fc-carmine").html("₹"+a.val().split(".")[0])}),$(document).on("change","input[name=exchangePolicyAgreementFlag]",function(){$(this).is(":checked")?$("#exchange_product").find(".modal-footer button[type=submit]").prop("disabled",!1):$("#exchange_product").find(".modal-footer button[type=submit]").prop("disabled",!0)}),$(".modal-footer button[type=submit]").on("click",function(){var e=$("#exchangeProgramBrandForm input[name=categoryId]").val(),a=$("#exchangeProgramBrandForm input[name=typeId]").val(),t=$("#exchangeProgramBrandForm input[name=brandId]").val(),o=$("input[name=exc_step_4]:checked").val(),d=$("input[name=exc_step_4]:checked").data("condition"),r=$("#exchangeProgramBrandForm input[name=exModelName]").val(),n=(y.find(".exchange-area .exchange-detail").attr({"data-categoryId":e,"data-typeId":a,"data-brandId":t,"data-bonusPrice":o,"data-condition":d,"data-exModelName":r}),$(".exchange-area .exchange-box").addClass("is-selected"),$(".exchange-area .exchange-box .price").addClass("d-none"),y.find(".exchange-area .exchange-detail .fc-carmine.fw-sb").html("₹"+o.split(".")[0]),y.find(".exchange-area .exchange-detail .tooltip-inner .desc")),e=(n.html('<strong></strong><ul class="ex"></ul>'),$("input[name=exc_step_4]:checked").siblings(".ex").find("li").clone().each(function(e,a){n.find("ul").append(a)}),$("input[name=exc_step_4]:checked").siblings(".text").text());n.find("strong").html(e),$(".exchange-area .more-box .btn-moreBox").focus()}),$(".exchange-area .exchange-box .exchange-detail .btn-area .link-text").on("click",function(){($(this).hasClass("btn-cancel")?$("#exc_opt_reset"):$("#exchange_product")).modal("show")}),$("#exc_opt_reset .modal-footer .btn-primary").on("click",function(){y.find(".exchange-area .exchange-detail").removeAttr("data-categoryid"),y.find(".exchange-area .exchange-detail").removeAttr("data-typeid"),y.find(".exchange-area .exchange-detail").removeAttr("data-brandid"),y.find(".exchange-area .exchange-detail").removeAttr("data-bonusprice"),y.find(".exchange-area .exchange-detail").removeAttr("data-condition"),y.find(".exchange-area .exchange-detail").removeAttr("data-exmodelName"),$("#exchangeProgramPincodeForm .error-msg").empty(),$(".chk-step-li").removeClass("is-show"),$(".chk-completion").removeClass("is-completed");var e=$("#exchange_product").find("form");$.each(e,function(e,a){a.reset()}),$("input[name=exc_step_4]").prop("checked",!1),$("input[name=exchangePolicyAgreementFlag]").prop("checked",!1),$("#exchange_product").find(".modal-footer button[type=submit]").prop("disabled",!0),$(".exchange-area .exchange-box").removeClass("is-selected"),$(".exchange-area .exchange-box .price").removeClass("d-none"),$(".exchange-area .more-box .btn-moreBox").focus()})},reSelectInit:function(){$("#exchange_product .easy-step #i_agree_exchange_policy").prop("checked",!1),$("#exchange_product .modal-footer .btn-primary").attr("disabled",!0),y.find(".exchange-area .exchange-detail").removeAttr("data-categoryid"),y.find(".exchange-area .exchange-detail").removeAttr("data-typeid"),y.find(".exchange-area .exchange-detail").removeAttr("data-brandid"),y.find(".exchange-area .exchange-detail").removeAttr("data-bonusprice"),y.find(".exchange-area .exchange-detail").removeAttr("data-condition"),y.find(".exchange-area .exchange-detail").removeAttr("data-exmodelname"),$(".exchange-area .exchange-box").removeClass("is-selected"),$(".exchange-area .exchange-box .price").removeClass("d-none")}},void 0!==$("#exchangeProgramUseFlag")&&null!=$("#exchangeProgramUseFlag").val()&&"Y"==$("#exchangeProgramUseFlag").val()&&exchangeProgram.autoValidationForm(),addToCart={$nav:$(".navigation").eq(0),store:$(".navigation").eq(0).data("store")?$(".navigation").eq(0).data("store"):"default",form:"#addtocartForm",cookieName:"LG5_CartID",cartID:null,url:$("header.navigation")&&$("header.navigation").data("cart-check")?$("header.navigation").data("cart-check"):"/graphql",successMsg:null,preOrderSuccessMsg:null,successBtnAlert:null,successBtnClose:null,successHTML:null,cookieNotice:null,init:function(){this.successMsg=this.$nav.find(".cart").data("alert-success"),this.preOrderSuccessMsg=this.$nav.find(".cart").data("pre-order-success"),this.successBtnAlert=this.$nav.find(".cart").data("alert-btn"),this.successBtnClose=this.$nav.find(".cart").data("close-btn"),this.cookieNotice=this.$nav.find(".cart").data("cookie-notice-msg"),this.$nav.find(".cart").removeAttr("data-alert-btn").removeAttr("data-alert-success").removeAttr("data-close-btn"),"Y"==OBS_LOGIN_FLAG?(addToCart.cartID=getCookie(addToCart.cookieName),addToCart.cartID?k.getGNBCart():ISSSO):"S"==OBS_LOGIN_FLAG&&o(),y.length&&(0<y.find(".checkAvailable").length?($(document).on("change","#comunaRegionId",$.proxy(k.comunaChange,self)),$(document).on("click",".checkAvailable a.btn-sm",function(e){e.preventDefault(),$("body").trigger("ajaxLoadBefore");e=$(this).closest(".checkAvailable").find(".check-comuna").val();k.checkComuna(e)})):$(document).on("click",".chkStBox a.btn-sm",function(e){e.preventDefault(),$("body").trigger("ajaxLoadBefore");var a=y.find("#pin-modelId").val(),e=("au"==COUNTRY_CODE&&0<$(".GPC0009").find(".add-bundle-area").length&&$(".add-bundle-area").eq(0).find(".bundle-select").each(function(){a=a+","+$(this).data("modelid")}),$(this).closest(".chkStBox").find(".check-pincode").val());k.checkSale(a,1,e)})),$("body").off("click.addtocart2").on("click.addtocart2",".add-to-cart-multi",function(e){e.preventDefault();var a,e=packageComponent.getMultiModelId();"Y"==OBS_LOGIN_FLAG&&(addToCart.cartID=getCookie(addToCart.cookieName),y.find("#pin-modelId").val()?0<y.find(".check-good").length?(a=y.find(".check-good").data("pin-code"),k.addProductToCart(e,1,addToCart.cartID,"","",a)):(y.find(".pdp-info.desktop-info").find("#check-pincode").focus(),y.find(".pdp-info.mobile-bottom-info").find("#check-pincode").focus()):k.addProductToCart(e,1,addToCart.cartID))}),$("body").off("click.addtocart").on("click.addtocart",".add-to-cart",function(e){var a=!("button"!=$(this).attr("role")||!OBS_LOGIN_FLAG||"Y"!=OBS_LOGIN_FLAG&&"S"!=OBS_LOGIN_FLAG),e=(a&&e.preventDefault(),d=$(this),$(this).attr("data-model-id")?$(this).attr("data-model-id"):$(this).data("modelId")),t=$(".addtocart-datelayer-use-flag").val(),o=$(".GPC0009").find("#obsPincodeFlag").val();if(0==$(this).hasClass("in-buynow")&&"Y"!=o&&"Y"!=t&&(0<$(".GPC0009").length&&(o=$(".GPC0009").data("product-id"))!=e?adobeTrackEvent("add-to-cart",{products:[{sales_model_code:findSalesModel($(this)),model_name:findModelName($(this)),value_added_to_cart:findPrice($(this)),units_added_to_cart:findModelCount($(this))}],cross_sell_product:o,page_event:{add_to_cart:!0}}):adobeTrackEvent("add-to-cart",{products:[{sales_model_code:findSalesModel($(this)),model_name:findModelName($(this)),value_added_to_cart:findPrice($(this)),units_added_to_cart:findModelCount($(this))}],page_event:{add_to_cart:!0}})),!a)return!0;if($("body").trigger("ajaxLoadBefore"),"Y"==OBS_LOGIN_FLAG)addToCart.cartID=getCookie(addToCart.cookieName),y.find("#pin-modelId").val()&&"cl"!=COUNTRY_CODE?0<y.find(".check-good").length?(o=y.find(".check-good").data("pin-code"),k.addProductToCart(e,1,addToCart.cartID,!0,$(this),o)):(0<y.find(".checkAvailable").length?($("#comunaRegionId").trigger("chosen:activate"),y.find(".check-region").focus()):($("#pincodeError").length||(a='<div class="modal modal-simple fade" id="pincodeError" tabindex="-1" role="dialog" data-backdrop="false" aria-describedby="pincodeErrorDialog">',a=(a=(a+='<div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body">')+'<div class="simple-content-box"><div class="content-paragraph" id="pincodeErrorDialog">'+((o=$(".GPC0009 .pdp-summary-area").data("pincode-error-text"))&&"component-pincode-error-text"!=o?o:"Please verify your pincode first.")+"</div></div></div>")+'<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+($(".GPC0009 .pdp-summary-area").data("pincode-ok")||"OK")+"</button></div></div></div></div>",$("body").append(a),$(document).on("hidden.bs.modal","#pincodeError",function(e){$(".GPC0009").hasClass("before")?(0<y.find(".delivery-list .option-list").length&&$("#pinCodeList").trigger("chosen:activate"),y.find(".check-pincode").focus()):$(".GPC0009").hasClass("improve")&&(0<y.find(".checkStock-list .option-list").length&&$("#pinCodeList").trigger("chosen:activate"),y.find(".check-pincode").focus())})),$("#pincodeError").modal()),$("body").trigger("ajaxLoadEnd")):"Y"==t?k.addProductToCart(e,1,addToCart.cartID,!0,$(this)):k.addProductToCart(e,1,addToCart.cartID);else{if("S"!=OBS_LOGIN_FLAG)return console.log("error!"),!0;r(e,1)}})},setCartNum:function(e){0<e?100<=e?addToCart.$nav.find(".for-mobile .right .cart .count, .for-desktop .right-btm .icons .cart .count").html("99+"):addToCart.$nav.find(".for-mobile .right .cart .count, .for-desktop .right-btm .icons .cart .count").html(e):addToCart.$nav.find(".for-mobile .right .cart .count, .for-desktop .right-btm .icons .cart .count").html("")},currentFocus:function(){d&&d.closest(".component").hasClass("GPC0003")&&d.closest(".item").addClass("on-focus"),d&&d.focus()}},"Y"==OBS_LOGIN_FLAG&&ISMAIN&&ISMS||"Y"==OBS_LOGIN_FLAG&&ISSSO||addToCart.init(),OBS={timeOut:5e3,useCookie:!0,url:addToCart.$nav.data("cart-check"),authToken:k.getToken(),cookieName:"LG5_ExcitingOffer",init:function(e){var a=getCookie(OBS.cookieName),t="";a&&""!=a&&(t=OBS.findCookieValue("ORDER")),"Y"==OBS_LOGIN_FLAG?(e.trigger("ajaxLoadBefore"),t?OBS.doSubmit(e,t):OBS.getOrderHistory(e)):(OBS_LOGIN_FLAG,e.trigger("ajaxLoadBefore"),OBS.doSubmit(e,""))},findCookieValue:function(e){var a=getCookie(OBS.cookieName),t={};if(a&&-1!=a.indexOf(e))if(-1!=a.indexOf(","))for(var o=a.split(","),d=0;d<o.length;d++)t[o[d].split(":")[0]]=o[d].split(":")[1];else t[a.split(":")[0]]=a.split(":")[1];return t[e]||""},addCookieValue:function(e,a){var t=getCookie(OBS.cookieName),o={};if(t&&-1!=t.indexOf(e))if(-1!=t.indexOf(","))for(var d=t.split(","),r=0;r<d.length;r++)o[d[r].split(":")[0]]=d[r].split(":")[1];else{var n=t;o[n.split(":")[0]]=n.split(":")[1]}o[e]=a,console.log(o),t="",$.each(o,function(e,a){t=""==t?t+e+":"+a:t+","+e+":"+a}),setCookie(OBS.cookieName,t)},delCookieValue:function(){removeCookie(OBS.cookieName,!0)},doSubmit:function(e,a){a&&e.find("form input[name=purchaseModelId]").val(a);var a=getCookie(OBS.cookieName),a=(a&&""!=a&&(cartProduct=OBS.findCookieValue("CART")),""),t=getCookie("LG5_CompareCart"),t=(t&&(a=-1!=t.indexOf("|")?t.split("|")[0]:t,e.find("form input[name=compareModelId]").val(a)),""),a=getCookie("LG5_RecentlyView");a&&(t=-1!=a.indexOf("|")?a.split("|")[0]:a,e.find("form input[name=recentlyModelId]").val(t)),e.find("form").submit()},getOrderHistory:function(o){var e;OBS.authToken?((e={}).Authorization="Bearer "+OBS.authToken,e.Store=addToCart.$nav.data("store"),e["Content-type"]="application/json",$.ajax({url:OBS.url,headers:e,type:"post",data:JSON.stringify({query:"{customerOrders(pageSize: 2 currentPage: 1) {items {id increment_id created_at status billing_address {firstname lastname postcode street city region {region_code} country_id telephone} shipping_address {firstname lastname postcode street city region {region_code} country_id telephone} items {sku qty_ordered price}}}}",variables:null,operationName:null}),dataType:"json",timeout:OBS.timeOut,success:function(e){var a,t;null!=e.data.customerOrders&&0<(a=e.data.customerOrders.items.length)&&0<(t=e.data.customerOrders.items[a-1].items.length)?(e=e.data.customerOrders.items[a-1].items[t-1].sku,OBS.addCookieValue("ORDER",e),OBS.doSubmit(o,e)):OBS.doSubmit(o,"")},error:function(e,a,t){OBS.doSubmit(o,"")}})):OBS.doSubmit(o,"")}},$("body").on("click",".add-to-cart",function(){var e=$(this),a="",t="",a=($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-price"),o=($(e).closest(".GPC0011").length&&(e=$(".GPC0009").find(".button a.add-to-cart")),t=$(".match-product-list").length?n(e.parents(".product-summary").find(".user-friendly-name").text()):$(".GPC0009").length||$(".GPC0102").length?n($(".pdp-summary-area .pdp-info.desktop-info").find(".model-title").text()):n(e.parents(".item").find(".model-name").text()),"."!=a&&".00"!=a&&"0.0"!=a&&"0"!=a||(a=""),($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-msrp"));"."!=o&&".00"!=o&&"0.0"!=o&&"0"!=o||(o=""),ga360Init={event:"addToCart",pageType:$(".GPC0009").length?"pdp":"nonPdp",displayName:t,siteType:"undefined"==typeof standardData?"":standardData.siteType,std_lv1:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-buname-one"),std_lv2:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-buname-two"),std_lv3:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-buname-three"),price:a,pagePurpose:_dl.page_name.page_purpose,sku:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-sku"),bu:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-buname-one"),country_code:_dl.country_code,page_category_l1:_dl.page_category_l1,page_category_l2:_dl.page_category_l2,page_category_l3:_dl.page_category_l3,page_category_l4:_dl.page_category_l4,language:_dl.language_code,superCategory:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-super-category-name"),primaryCategory:_dl.page_name.category,subCategory:_dl.page_name.sub_category,name:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-model-salesmodelcode"),modelCode:($(e).closest(".GPC0102").length?$(".GPC0009").find(".add-to-cart"):e).attr("data-model-id"),productDetailArray:new Array,currencyCode:$(".currency-code").val(),quantity:0,cartID:new Object,ecommerce:new Object,obsGroup:$(".navigation").attr("data-obs-group"),metric4:o,cart_btn:"Y",init:function(){},addData:function(){dataLayer.push({event:ga360Init.event,siteType:x(ga360Init.siteType,"B2C"),pagePurpose:x(ga360Init.pagePurpose,ga360Init.pageType),ecommerce:ga360Init.ecommerce,cartID:ga360Init.cartID}),digitalDataLayer.push({event:ga360Init.event,siteType:x(ga360Init.siteType,"B2C"),pagePurpose:x(ga360Init.pagePurpose,ga360Init.pageType),ecommerce:ga360Init.ecommerce,cartID:ga360Init.cartID})}},e.hasClass("pre-order")||"Y"==e.closest(".GPC0009").data("track-event-flag")&&e.closest(".GPC0009").length&&!e.closest(".GPC0009").find(".check-good").length&&adobeTrackEvent("add_to_cart_click_additional",{level1:standardData.level1,level2:standardData.level2,level3:standardData.level3,sales_model_code:_dl.products[0].sales_model_code,model_name:_dl.products[0].model_name,bu:_dl.page_name.bu,page_event:{add_to_cart_click_additional:!0}})});var i=y.find(".desktop-info .chkStBox a.btn-sm"),s=y.find(".mobile-bottom-info .chkStBox a.btn-sm");function c(e,a){e.target.value=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"),6===e.target.value.length?a.removeClass("disabled"):a.addClass("disabled")}"IN"==$("html").data("countrycode").toUpperCase()&&(e=document.querySelector(".desktop-info #check-pincode"),a=document.querySelector(".mobile-bottom-info #check-pincode"),i.addClass("disabled"),s.addClass("disabled"),e.maxLength=6,a.maxLength=6,e.addEventListener("input",e=>c(e,i)),a.addEventListener("input",e=>c(e,s)),$(".mobile-bottom-info #check-pincode").on("input",function(){6==$(this).val().length?s.removeClass("disabled"):s.addClass("disabled")}))});
//# sourceMappingURL=maps/add-to-cart.min.js.map
